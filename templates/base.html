{% load static %}
<!DOCTYPE html>
<html lang="pt-br">

<head>
  <!-- Meta tags Obrigatórias -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  {% block 'head' %}{% endblock 'head' %}
  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
    crossorigin="anonymous">


  <title>{% block 'titulo' %}{% endblock 'titulo' %}</title>

</head>

<body>
  <nav class="navbar navbar-dark bg-dark">
    <a class="navbar-brand" href="{% url 'livro:inicio'%}">Biblioteca</a>
    {% if usuario_logado %}
    <!-- Button trigger modal -->
    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal">
      Cadastrar
    </button>

    <a href="{% url 'usuarios:sair' %}" class="btn btn-danger">Sair</a>
    {% endif %}
  </nav>

  {% block 'conteudo' %}{% endblock 'conteudo' %}

  <!-- JavaScript (Opcional) -->
  <!-- jQuery primeiro, depois Popper.js, depois Bootstrap JS -->
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js"></script>

  {% if usuario_logado %}
  <!-- Modal -->
  <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Cadastrar Livro</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <!--Botões-->
          <button class="btn btn-info" onclick="mostrar_form('Categoria')">Categoria</button>
          <button class="btn btn-warning" onclick="mostrar_form('Livro')">Livro</button>
          <button class="btn btn-primary" onclick="mostrar_form('Emprestimo')">Empréstimo</button>
          <br>
          <br>
          <!-- Formulários de cadastro de livro, categoria e emprestimos -->
          <div style="display: none;" id="livro">
            <form action="{% url 'livro:cadastrar_livro'%}" method="POST">
              {% csrf_token %}
              <table>{{formulario.as_table}}</table>
              <input type="submit" class="btn btn-success" value="Cadastrar">
            </form>
          </div>

          <div style="display: none;" id="categoria">
            <form action="{% url 'livro:cadastrar_categoria'%}" method="POST">
              {% csrf_token %}
              <table>{{form_categoria.as_table}}</table>
              <input type="hidden" name="usuario" value="{{usuario_logado}}">
              <input class="btn btn-success" type="submit" value="Cadastrar">
            </form>
          </div>

          <div style="display: none;" id="emprestimo">Emprestimos</div>



        </div>

      </div>
    </div>
  </div>
  {% endif %}

  <script>
    function mostrar_form(f){
      categoria = document.getElementById('categoria')
      livro = document.getElementById('livro')
      emprestimo = document.getElementById('emprestimo')

      if (f == 'Categoria'){
        //console.log(f)
        //Habilitando
        categoria.style.display = 'block'
        //Desabilitando
        livro.style.display = 'none'
        emprestimo.style.display = 'none'
      }
      if (f == 'Livro'){
        //console.log(f)
        //Habilitando
        livro.style.display = 'block'
        //Desabilitando
        categoria.style.display = 'none'
        emprestimo.style.display = 'none'
      }
      if (f == 'Emprestimo'){
        //console.log(f)
        //Habilitando
        emprestimo.style.display = 'block'
        //Desabilitando
        livro.style.display = 'none'
        categoria.style.display = 'none'
      }
    }

  </script>

</body>

</html>